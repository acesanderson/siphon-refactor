# Description: direnv configuration for the Siphon project

# Determine the project root using git
export PROJECT_ROOT=$(git rev-parse --show-toplevel 2>/dev/null)
if [[ -z "$PROJECT_ROOT" ]]; then
  echo "direnv: error: could not find git root." >&2
  exit 1
fi

# Export common project directories
export DEV="$PROJECT_ROOT/dev"
export DOCS="$PROJECT_ROOT/docs"
export TESTS="$PROJECT_ROOT/tests"
export API="$PROJECT_ROOT/siphon-api/src/siphon_api"
export SERVER="$PROJECT_ROOT/siphon-server/src/siphon_server"
export CLIENT="$PROJECT_ROOT/siphon-client/src/siphon_client"

# Navigation functions (not aliases - direnv doesn't export aliases)
cdapi() { cd "$PROJECT_ROOT/packages/siphon-api"; }
cdserver() { cd "$PROJECT_ROOT/packages/siphon-server"; }
cdclient() { cd "$PROJECT_ROOT/packages/siphon-client"; }

# Export functions (critical for bash)
export -f cdapi
export -f cdserver
export -f cdclient
